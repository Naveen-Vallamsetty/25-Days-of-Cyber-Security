# 📅 Day 2 – Web Exploitation

Today’s focus: **GET Parameters, URLs, and File Upload Vulnerabilities**

---

## 🌐 Understanding GET Parameters & URLs

A **URL (Uniform Resource Locator)** has multiple components that define where a resource is located and how it is accessed.

### 🔹 The 7 Parts of a URL

Example:  
`https://www.thebestfestivalcompany.xyz/index.php?snack=mincePie`

1. **Protocol → `https://`**

   - Defines how the browser communicates with the server.
   - `http://` → Not encrypted, `https://` → Encrypted using TLS.

2. **Subdomain → `www`**

   - Optional part used to organize websites.
   - Example: `blog.example.com`, `shop.example.com`, `api.docs.com`

3. **Domain → `thebestfestivalcompany`**

   - Main human-readable name of the website.

4. **Top-Level Domain (TLD) → `.xyz`**

   - Examples: `.com`, `.org`, `.co.uk`.
   - Defines the type or region of the domain.

5. **Resource Path → `/index.php`**

   - Points to a specific file or page on the server.

6. **Parameter Name → `?snack`**

   - Begins with `?` and defines an input value sent to the server.

7. **Parameter Value → `=mincePie`**
   - Assigned value to the parameter.

👉 Together, GET parameters allow the client (browser) to send data to the server **directly in the URL**.  
These parameters are often used in **search queries, login forms, and navigation**.

⚠️ **Security Risk**: Attackers can manipulate parameters (e.g., SQL Injection, IDOR, XSS).

---

## 📂 File Upload Vulnerabilities

Many websites allow file uploads (images, PDFs, docs, etc.).  
If not properly secured, attackers can abuse this functionality to **upload malicious files**.

### 🔹 Common Attacks

1. **Remote Code Execution (RCE)**

   - Uploading a script (PHP, JS, Bash) and executing it on the server.

2. **File Extension Filtering**

   - Websites may allow only specific extensions (`.jpg`, `.png`, etc.).
   - Attackers can bypass using **double extensions**:  
     Example: `shell.jpg.php` → appears as an image but executes as PHP.

3. **MIME Type Spoofing**
   - Changing the MIME type in the request header to trick validation.

---

## 🐚 Reverse Shells

A **reverse shell** allows an attacker to get remote access to the target server.  
Instead of the attacker connecting in, the victim server connects back to the attacker’s listener.

### 🔹 Steps

1. Use a prebuilt script (e.g., PHP reverse shell):

   - Located at:
     ```
     /usr/share/webshells/php/php-reverse-shell.php
     ```

2. Set up a listener on your machine with **Netcat**:
   ```
   sudo nc -lvnp 443
   ```

3. Upload the reverse shell file to the vulnerable site.

4. Find the **uploads directory** (commonly `/uploads/`).

5. Access the file in the browser → The shell connects back to your listener.

⚠️ **Result**: Full remote access to the target server!

---

## ⚡ Exploitation Workflow

1. Identify file upload functionality.
2. Upload harmless files first → learn what file types are allowed.
3. Locate upload directory → where files are stored.
4. Try uploading a reverse shell (bypass filters with double extensions).
5. Start listener (`nc -lvnp 443`).
6. Trigger uploaded reverse shell via browser.
7. Gain remote access to the system.

---

## 🔑 Key Takeaways

* **GET Parameters** are simple yet powerful; insecure handling leads to URL-based attacks.
* **File Uploads** must always be validated on the **server side**, not just the client side.
* Never trust file extensions alone; use strict checks (magic bytes, MIME validation).
* **Reverse Shells** show how attackers escalate from a simple upload to full system access.

🔒 **Defensive Measures for Developers:**

* Restrict allowed file types (strict MIME + magic byte check).
* Rename uploaded files to random values.
* Store outside webroot to prevent direct execution.
* Use web application firewalls (WAFs).

---


## 🕵️ Challenge Answers

Q1: What string of text needs adding to the URL to get access to the upload page?
👉 ?id=ODIzODI5MTNiYmYw

Q2: What type of file is accepted by the site?
👉 image

Q3: Bypass the filter and upload a reverse shell.
In which directory are the uploaded files stored?
👉 /uploads/

Q4: Activate your reverse shell and catch it in a netcat listener!

Q5: What is the flag in /var/www/flag.txt?
👉 THM{MGU3Y2UyMGUwNjExYTY4NTAxOWJhMzhh}


